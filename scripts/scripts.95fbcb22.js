"use strict";angular.module("fxApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ui.mask"]).constant("STRING_CONSTANT",{url:"http://fakeUrlForImages.com/images/",postGetUrl:"http://demo1183916.mockable.io/anuncio",auth:"egeniusfounders2016"}).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl",controllerAs:"register"}).otherwise({redirectTo:"/"})}]).factory("realtyService",["$http","$location","STRING_CONSTANT",function(a,b,c){var d={async:function(){var b=c.postGetUrl,d=a.get(b).then(function(a){return a.data});return d}};return d}]).service("methodUrl",["$http","$q","$injector","messageService",function(a,b,c,d){this.postResponse=function(c,d){var e={},f=b.defer();return a.post(c.url,c.data,c.header).then(function(a){e=a,f.resolve(a)},function(a){console.log("failure callback"),console.log(a)}),f.promise}}]).service("messageService",["$resource",function(a){var b=this;b.getSuccessMessage=function(a,b){a.messageInfo={},a.messageInfo.messages=[],a.messageInfo["class"]="alert-success",a.messageInfo.show=!0,a.messageInfo.messages.push({description:b})}}]).service("fileUpload",[function(){this.imageUpload=function(a,b){a.$apply(function(c){var d=b.files[0],e=angular.element(b).attr("data-file-index");a.form.image[e]=b.files[0].name;var f=new FileReader;f.onload=function(a){var b=(a.target.result,f.result),c=document.getElementById("output"+e);c.src=b},f.readAsDataURL(d)})}}]).run(["$rootScope","$location",function(a,b){a.location=b}]).controller("realityFormCtrl",["$scope",function(a){a.braStates=[{description:"Acre",id:"AC"},{description:"Alagoas",id:"AL"},{description:"Amapá",id:"AP"},{description:"Amazonas",id:"AM"},{description:"Bahia",id:"BA"},{description:"Ceará",id:"CE"},{description:"Distrito Federal",id:"DF"},{description:"Espírito Santo",id:"ES"},{description:"Goiás",id:"GO"},{description:"Maranhão",id:"MA"},{description:"Mato Grosso",id:"MT"},{description:"Mato Grosso do Sul",id:"MS"},{description:"Minas Gerais",id:"MG"},{description:"Pará",id:"PA"},{description:"Paraíba",id:"PB"},{description:"Paraná",id:"PR"},{description:"Pernambuco",id:"PE"},{description:"Piauí",id:"PI"},{description:"Rio de Janeiro",id:"RJ"},{description:"Rio Grande do Norte",id:"RN"},{description:"Rio Grande do Sul",id:"RS"},{description:"Rondônia",id:"RO"},{description:"Roraima",id:"RR"},{description:"Santa Catarina",id:"SC"},{description:"São Paulo",id:"SP"},{description:"Sergipe",id:"SE"},{description:"Tocantins",id:"TO"}]}]),angular.module("fxApp").controller("MainCtrl",["$scope","realtyService",function(a,b){a.callRealtyService=function(){b.async().then(function(b){a.data=b.result})},a.callRealtyService()}]),angular.module("fxApp").controller("RegisterCtrl",["$scope","STRING_CONSTANT","fileUpload","methodUrl","messageService",function(a,b,c,d,e){a.form={},a.form.id=0,a.form.type="Appartment",a.form.image=[],a.setFileUpload=function(b){c.imageUpload(a,b)},a.submitData=function(){a.formTemp=a.form;var c={};c.address=a.formTemp.street+", "+a.formTemp.streetNumber+", "+a.formTemp.district+", "+a.formTemp.city+", "+a.formTemp.brState,a.formTemp.place=c,Reflect.deleteProperty(a.formTemp,"street"),Reflect.deleteProperty(a.formTemp,"streetNumber"),Reflect.deleteProperty(a.formTemp,"district"),Reflect.deleteProperty(a.formTemp,"city"),Reflect.deleteProperty(a.formTemp,"brState");for(var f=[],g=0;g<a.formTemp.image.length;g++){var h={};h.desc=a.formTemp.imgDesc[g],h.url=b.url+a.formTemp.image[g],f.push(h)}a.formTemp.images=f,Reflect.deleteProperty(a.formTemp,"image"),Reflect.deleteProperty(a.formTemp,"imgDesc");var i={url:b.postGetUrl,data:a.formTemp,header:{Authorization:b.auth}};d.postResponse(i,a).then(function(b){a.form={},$(".form").css("display","none"),e.getSuccessMessage(a,"Imóvel cadastrado com sucesso.")})}}]),angular.module("fxApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="reality" ng-repeat="reality in data"> <h3 ng-bind="reality.name"></h3> <div class="main-content"> <div class="row"> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 image-container"> <div id="myCarousel" class="carousel slide" data-ride="carousel"> <ol class="carousel-indicators"> <li ng-class="{active:$first}" data-target="#myCarousel" data-slide-to="{{$index}}" ng-repeat="image in reality.images"></li> </ol> <div class="carousel-inner" role="listbox"> <div ng-class="{active:$first}" class="item" ng-repeat="image in reality.images"> <img ng-src="{{image.url}}" alt="image.desc"> </div> </div> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 description"> <p ng-bind="reality.description"></p> </div> </div> <div class="row"> <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 realty-data"> <p><label>Tipo do imóvel: </label> <span ng-show="reality.type == \'Appartment\'" ng-bind="\'Apartamento\'"></span> <span ng-show="reality.type == \'Edifice\'" ng-bind="\'Casa\'"></span></p> <p><label>Endereço: </label><span ng-bind="reality.place[0].address"></span></p> <p><label>Preço: </label><span ng-bind="\'R$ \' + reality.value + \',00\'"></span></p> <p><label>Contato: </label><span ng-bind="reality.contact"></span></p> </div> </div> </div> </div> <div class="row sub-content"> <p class="text-right"><a class="btn btn-lg btn-link" ng-href="#!/register">Cadastre seu imóvel</a></p> </div>'),a.put("views/register.html",'<div ng-repeat="message in messageInfo.messages"> <div class="alert alert-dismissible" ng-class="messageInfo.class"> <button type="button" class="close" data-dismiss="alert"> ×</button> <strong> <span ng-bind="message.description">teste</span> </strong> </div> </div> <div class="reality form" ng-controller="realityFormCtrl"> <form ng-submit="submitData();"> <input type="hidden" id="id" ng-model="form.id"> <div class="row"> <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label for="name">Título</label> <input type="text" class="form-control" id="name" ng-model="form.name" placeholder="título" oninvalid="this.setCustomValidity(\'informe o título.\')" oninput="setCustomValidity(\'\')" required> </div> </div> </div> <div class="row"> <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label for="description">Descrição</label> <textarea class="form-control" maxlength="100" id="description" ng-model="form.description" rows="2" placeholder="descrição" oninvalid="this.setCustomValidity(\'informe a descrição.\')" oninput="setCustomValidity(\'\')" required></textarea> <span class="help-block">{{100 - form.description.length}} dígitos restantes.</span> </div> </div> </div> <div class="row"> <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12"> <div class="form-group"> <label for="value">Valor</label> <div class="input-group"> <div class="input-group-addon">R$</div> <input type="number" class="form-control" id="value" ng-model="form.value" placeholder="valor" oninvalid="this.setCustomValidity(\'informe o valor.\')" oninput="setCustomValidity(\'\')" required> <div class="input-group-addon">,00</div> </div> </div> </div> <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12"> <div class="form-group"> <label for="phoneNumber">Telefone de contato</label> <input type="text" class="form-control" id="phoneNumber" ng-model="form.phoneNumber" placeholder="número de telefone" ui-mask="(99) 99999999?9" ui-mask-placeholder ui-mask-placeholder-char=" " model-view-value="true" oninvalid="this.setCustomValidity(\'informe o telefone de contato.\')" oninput="setCustomValidity(\'\')" required> </div> </div> <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 radios-inline"> <p>Tipo de imóvel</p> <div class="radio"> <label for="type1"> <input type="radio" name="type" id="type1" ng-model="form.type" value="Appartment" ng-checked="true"> Apartamento </label> </div> <div class="radio"> <label for="type2"> <input type="radio" name="type" id="type2" ng-model="form.type" value="Edifice"> Casa </label> </div> </div> </div> <div class="row"> <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12"> <div class="form-group"> <label for="street">Logradouro</label> <input type="text" class="form-control" id="street" ng-model="form.street" placeholder="nome do logradouro" oninvalid="this.setCustomValidity(\'informe o logradouro.\')" oninput="setCustomValidity(\'\')" required> </div> </div> <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12"> <div class="form-group"> <label for="streetNumber">Número</label> <input type="number" class="form-control" id="streetNumber" ng-model="form.streetNumber" placeholder="número" oninvalid="this.setCustomValidity(\'informe o número.\')" oninput="setCustomValidity(\'\')" required> </div> </div> <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12"> <div class="form-group"> <label for="district">Bairro</label> <input type="text" class="form-control" id="district" ng-model="form.district" placeholder="bairro" oninvalid="this.setCustomValidity(\'informe o bairro.\')" oninput="setCustomValidity(\'\')" required> </div> </div> </div> <div class="row"> <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12"> <div class="form-group"> <label for="city">Cidade</label> <input type="text" class="form-control" id="city" ng-model="form.city" placeholder="cidade" oninvalid="this.setCustomValidity(\'informe a cidade.\')" oninput="setCustomValidity(\'\')" required> </div> </div> <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12"> <div class="form-group"> <label for="brState">Estado</label> <select ng-model="form.brState" id="brState" class="form-control" oninvalid="this.setCustomValidity(\'escolha uma opção para o estado.\')" oninput="setCustomValidity(\'\')" required> <option value="" selected>-</option> <option ng-repeat="braState in braStates" value="{{braState.id}}">{{braState.description}} </option> </select> </div> </div> </div> <div class="row"> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-center"> <div class="form-group text-left"> <label for="image1">Imagem de exibição 1</label> <input type="file" id="image1" ng-model="form.image[0]" oninvalid="this.setCustomValidity(\'escolha uma imagem para enviar.\')" onchange="setCustomValidity(\'\'); angular.element(this).scope().setFileUpload(this)" accept="image/*" data-file-index="0" required> </div> <img id="output0" class="imageOutput"> <input type="text" class="form-control" id="imgDesc1" ng-model="form.imgDesc[0]" placeholder="descrição da imagem 1" oninvalid="this.setCustomValidity(\'informe a descrição da imagem 1.\')" oninput="setCustomValidity(\'\')" required> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-center"> <div class="form-group text-left"> <label for="image2">Imagem de exibição 2</label> <input type="file" id="image2" ng-model="form.image[1]" oninvalid="this.setCustomValidity(\'escolha uma imagem para enviar.\')" onchange="setCustomValidity(\'\'); angular.element(this).scope().setFileUpload(this)" accept="image/*" data-file-index="1" required> </div> <img id="output1" class="imageOutput"> <input type="text" class="form-control" id="imgDesc2" ng-model="form.imgDesc[1]" placeholder="descrição da imagem 2" oninvalid="this.setCustomValidity(\'informe a descrição da imagem 2.\')" oninput="setCustomValidity(\'\')" required> </div> </div> <div class="row"> <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-right"> <button type="submit" class="btn btn-lg btn-success">Enviar</button> </div> </div> </form> </div>')}]);